% tlpguide.tex
% v1.0, released 24 Mar 2021
% Copyright 2021 Cambridge University Press

\documentclass{tlp}
\usepackage{bbold}
\usepackage{my_prelude}
\usepackage{infer}
\usepackage{assume}
\usepackage{dynamic_run}
\usepackage{static_check}
\DeclareUnicodeCharacter{03BB}{$\lambda$}

\bibliographystyle{tlplike}

\begin{document}

\lefttitle{Davide Fissore and Enrico Tassi}

\jnlPage{1}{8}
\jnlDoiYr{2021}
\doival{10.1017/xxxxx}

\title[Determinacy Checking for Elpi: Higher Order Prolog with Cut]{
  Determinacy Checking for Elpi}

\begin{authgrp}
\author{\gn{Davide Fissore}}
\affiliation{Université Côte d'Azur, Inria\thanks{This work has been supported by the French government, through the France 2030
investment plan managed by the Agence Nationale de la Recherche, as part of the
``UCA DS4H'' project, reference ANR-17-EURE-0004.}}
\author{\gn{Enrico Tassi}}
\affiliation{Université Côte d'Azur, Inria}
\end{authgrp}

%\history{\sub{xx xx xxxx;} \rev{xx xx xxxx;} \acc{xx xx xxxx}}

\maketitle

\begin{abstract}
% We study the determinacy checker for Elpi, a higher-order logic programming
% language: Predicates can receive predicates as arguments
% and can locally assert clauses.

% We give an operational semantics for Elpi that accounts for
% the cut operator and local asserts. The semantics makes
% choice points explicit, allowing us to
% call operationally determinate (or functional) predicates that do not leave any
% choice points. 

% We design a language of signatures with preconditions
% that allows determinate predicates to be miscalled. The static
% checker tracks miscalled functions and considers them
% relations (non-determinate predicates) for the analisys of the surrounding code.
% As a result we can add signatures without breaking existing code, progressively increasing
%  staic guarantees.

We study the determinacy checker for Elpi, a higher-order logic programming
language in which predicates can receive other predicates as arguments and
can locally assert new clauses.

We present an operational semantics for Elpi that accounts for these higher-order
features and the cut operator. This semantics explicitly represents choice points,
enabling us to identify operationally determinate (or functional)
predicates -- those that do not leave any choice points.

Furthermore, we design a language of signatures with preconditions, allowing
determinate predicates to be miscalled. The static checker tracks miscalled
functions and treats them as relations (non-determinate predicates) when
analyzing
the surrounding code. As a result, signatures can be introduced without
breaking existing code, progressively enhancing static guarantees.
\end{abstract}

\begin{keywords}
Functionality, Determinacy Analysis, Higher Order, Logic Programming, Cut
\end{keywords}



\input{inputs/intro.tex}
\input{inputs/dynamic.tex}
\input{inputs/static.tex}
\input{inputs/theorems.tex}

% \input{inputs/elpi_hoas.tex}
%\input{inputs/elpi_basic.tex}
\input{inputs/conclusion.tex}

%\input{inputs/intro.tex}
% \input{inputs/enrico.tex}
\bibliography{bib}

\appendix
\section{Theorem proofs}
\input{inputs/appendix.tex}

\end{document}
